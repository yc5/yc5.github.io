<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>æ‡‡è«‹è³œç¥¨ï¼šGatsby å‰µæ„å¤§è³ by å°ç£é„­é›…äº‘åœ˜éšŠ</title>
    <meta name="Description" content="ä½¿ç”¨é€™å¥—ç³»çµ±æŠ•ç¥¨ï¼Œæ‚¨åªéœ€è¦é»ä¸€ä¸‹æŠ•ç¥¨æŒ‰éˆ•ï¼Œå¯ä»¥ç¯€çœå°‹æ‰¾ä½œå“çš„æ™‚é–“ã€‚">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">

    <!-- Facebook OG -->
    <meta property="og:title" content="æ‡‡è«‹è³œç¥¨ï¼šGatsby å‰µæ„å¤§è³ by å°ç£é„­é›…äº‘åœ˜éšŠ" />
    <meta property="og:description" content="ä½¿ç”¨é€™å¥—ç³»çµ±æŠ•ç¥¨ï¼Œæ‚¨åªéœ€è¦é»ä¸€ä¸‹æŠ•ç¥¨æŒ‰éˆ•ï¼Œå¯ä»¥ç¯€çœå°‹æ‰¾ä½œå“çš„æ™‚é–“ã€‚" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yc5.github.io/gatsby2018/" />
    <meta property="og:image" content="https://yc5.github.io/gatsby2018/shot1.png" />

    <style>
     *{
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
     }
     body {
        padding-top: 5rem;
      }
      .starter-template {
        padding: 3rem 1.5rem;
        text-align: center;
      }
      .flag{
        width: 1.25em;
        display: inline-block;
        line-height: 24px;
        vertical-align: baseline;
        padding-right: 4px;
      }
      h3{
        line-height: 24px;
        font-size-adjust: 100%;
        
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="#">å¹«å¹«æŠ•å€‹ç¥¨</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">å°ç£é„­é›…äº‘åœ˜éšŠ <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link">è­˜åˆ¥ç¢¼ï¼š<span id="text_nonce"></span></a>
          </li>
        </ul>
      </div>

      <span class="navbar-text" style="margin-right: 1em">
        ç›®å‰çš„IPç‚ºï¼š<span id="text_ip">å–å¾—ä¸­...</span>
      </span>
      <span class="navbar-text">
        <span id="text_votes"></span>
      </span>
    </nav>

    <main role="main" class="container">

      <div class="starter-template">
        <h1>Gatsby å‰µæ„å¤§è³ by å°ç£é„­é›…äº‘åœ˜éšŠ</h1>
        <!-- <p class="lead">ä½¿ç”¨é€™å¥—ç³»çµ±æŠ•ç¥¨ï¼Œæ‚¨åªéœ€è¦é»ä¸€ä¸‹æŠ•ç¥¨æŒ‰éˆ•ï¼Œå¯ä»¥ç¯€çœå°‹æ‰¾ä½œå“çš„æ™‚é–“ã€‚æŠ•ç¥¨ç¥¨æ•¸ä¸€å€‹IPåƒ…è¨ˆç®—ä¸€æ¬¡ã€‚</p> -->
        <p class="lead">è«‹å¹«æˆ‘å€‘æŒ‰ä¸€ä¸‹æŠ•ç¥¨æŒ‰éˆ•ï¼Œç•¶æˆåŠŸè¨Šæ¯è·³å‡ºå³å®ŒæˆæŠ•ç¥¨ï¼ŒæŠ•ç¥¨ç¥¨æ•¸ä¸€å€‹IPåƒ…è¨ˆç®—ä¸€æ¬¡ï¼Œæ„Ÿæ¿€ä¸ç›¡ã€‚</p>
        
        <p>
          <button type="button" class="btn btn-primary btn-lg btn-block" id="vote">æŠ•ç¥¨</button>
          
        </p>
        <p id="msg"></p>

        <div class="row">
        <div class="col-md-6">
        <div class="card">
        <div class="card-header">èªªæ˜</div>
        <div class="card-body">
        <h5 class="card-title">ã€è³‡å‹å¹«å¹«å¿™ â˜ Gatsby Creative awardsã€‘</h5>
        <p class="card-text">
        å„ä½!!!
        <br>ä»Šå¹´gatsbyå½±ç‰‡ç«¶è³½ç³»ä¸Šå­¸ç”Ÿåˆå…¥åœäº†!!!
        <br>éœ€è¦å¤§å®¶å¹«å¿™è¡ç¶²è·¯æŠ•ç¥¨å°‡ä»–å€‘é€å»æ—¥æœ¬æ¯”è³½!
        <br>äºæ´²å€12åœ‹å–1ï¼Œé‚£å€‹1å¸Œæœ›å°±æ˜¯å°ç£å•Š!
        <br>
        <br>ãƒ»æŠ•ç¥¨æœŸé–“ï¼š2018å¹´11æœˆ16æ—¥(äº”) - 2018å¹´12æœˆ3æ—¥(ä¸€)
        <br>
        <br>è«‹èªæ˜CMçµ„ã€ğŸ‡¹ğŸ‡¼ é„­é›…äº‘ã€
        <br>é›»è…¦ã€æ‰‹æ©Ÿã€å¹³æ¿éƒ½å¯ä»¥æŠ•ï¼Œéº»ç…©äº†~
        <br>
        <br>æ‡‡è«‹æ”¯æŒ!æ‹œè¨—æ‹œè¨—!</p>
        </div>
        </div>
        </div>

        <div class="col-md-6">
        <a href="https://award.gatsby.jp/wp/wp-content/themes/gca/lib/work/cm/tw/2017.mp4" target="_blank">
          <img src="shot1.png" class="img-thumbnail" alt="">
        </a>
        <h3 class="h5"><img class="flag" src="https://award.gatsby.jp/wp/wp-content/themes/gca/lib/img/common/flag/tw.png">é„­é›…äº‘<a href="https://award.gatsby.jp/tw/vote/cm/" target="_blank">é€ è¨ªGatsbyåŸå§‹ç¶²ç«™</a></h3>
        </div>
        </div>
      </div>

    </main><!-- /.container -->

    <footer class="text-muted">
      <div class="container">
        <p class="float-right">
          <a href="https://xstar.me">XSTAR Studio</a>
        </p>
        <p>&copy; 2018 xSTAR Studio</p>
      </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script>
    var nonce = "af204f5786";
    jQuery(document).ready(function(){
      var vote_times = 0;
      $("#text_nonce").text(nonce);
      $("button#vote").click(function( event ){
        // if(vote_times>0){get_current_ip();}
        get_current_ip();

        // Stop form from submitting normally
        event.preventDefault();
       
        // Get some values from elements on the page:
        var url = "https://award.gatsby.jp/wp/wp-admin/admin-ajax.php";
       
        // Send the data using post
        var posting = jQuery.ajax({
             type : "post",
             dataType : "json",
             url : url,
             data : {action: "wti_like_post_process_vote", task : "like", post_id : "2598", nonce: nonce}
        });

        var $this = $(this);
        $this.text("æ­£åœ¨å‚³é€æŠ•ç¥¨è«‹æ±‚");
        $this.attr("disabled", true);
        
        // Put the results in a div
        posting.done(function( data ) {
          $("p#msg").append("<div class='alert alert-success' role='alert'> "+"æŠ•ç¥¨æˆåŠŸï¼ŒGatsbyå·²é–‹æ”¾CROSã€‚"+" </div>");
        });
        posting.fail(function(){
          // Show success message
          var msg_success =  $("<div></div>").text("æŠ•ç¥¨æˆåŠŸï¼Œè¬è¬ä½ çš„å¹«å¿™ï¼");
          msg_success.addClass("alert alert-success");
          msg_success.attr("role", "alert");
          $("p#msg").append(msg_success);
          msg_success.delay(5500).fadeOut(300, function(){ $(this).remove();});
          
          // var tmp = get_votes_amount(); // Async problem
          // $this.after("<button type='button' class='btn btn-warning btn-lg btn-block' id='revote'>ä¸åŒIPé‡æŠ•</button>");
          // $("button#revote").bind("click", revote);
          $this.text("ä»¥ä¸åŒIPé‡æŠ•");
          $this.attr("disabled", false);
          $this.removeClass("btn-primary");
          $this.addClass("btn-warning");
          get_votes_amount();
          vote_times++;
        });
      });
      $("button#vote").click();
    }); //jQuery
    
    // JS get IP
    function get_current_ip(){
      $.getJSON('https://api.ipify.org/?format=json', function(data) {
        $("#text_ip").text(data.ip);
      }).fail(function() {
        $("#text_ip").text("ç„¡æ³•å–å¾—");
      });
    };
    // get_current_ip();

    // Get votes amount
    function get_votes_amount(){
      var v =  "Unknown";
      $.ajax({
          url: "https://xstar.me/to/20181110-g/handle.php", 
          cache: false,
          success: function(response) {
              result = $(response).find(".lc-2598.lc");
              nonce = $(response).find(".like-2598").data("nonce");
              v = result[0].textContent;
              $("#text_votes").text("ç›®å‰ç¥¨æ•¸ï¼š" + v);
              $("#text_nonce").text(nonce);
          }
      });
    }
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-24449663-8"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-24449663-8');
	</script>
  </body>
</html>